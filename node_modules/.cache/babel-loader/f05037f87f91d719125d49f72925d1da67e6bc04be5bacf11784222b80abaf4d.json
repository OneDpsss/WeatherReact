{"ast":null,"code":"import{useState,useEffect}from'react';import axios from'axios';const API_KEY='81ac6854a1b748926ad19292fd753dab';function useWeather(unit){const[latestWeatherData,setLatestWeatherData]=useState(null);const[error,setError]=useState(null);const fetchWeather=async city=>{if(!city){setError('Пожалуйста, введите название города');return;}try{setError(null);setLatestWeatherData(null);const currentResponse=await axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(city,\"&appid=\").concat(API_KEY,\"&units=\").concat(unit));const forecastResponse=await axios.get(\"https://api.openweathermap.org/data/2.5/forecast?lat=\".concat(currentResponse.data.coord.lat,\"&lon=\").concat(currentResponse.data.coord.lon,\"&appid=\").concat(API_KEY,\"&units=\").concat(unit));setLatestWeatherData({current:currentResponse.data,forecast:forecastResponse.data});}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===404){setError('Город не найден. Попробуйте другое место.');}else{setError('Не удалось получить данные о погоде. Попробуйте позже.');}}};useEffect(()=>{fetchWeather('Moscow');},[unit]);return{latestWeatherData,error,fetchWeather};}export default useWeather;","map":{"version":3,"names":["useState","useEffect","axios","API_KEY","useWeather","unit","latestWeatherData","setLatestWeatherData","error","setError","fetchWeather","city","currentResponse","get","concat","forecastResponse","data","coord","lat","lon","current","forecast","err","_err$response","response","status"],"sources":["/Users/valerashavlaygin/IdeaProjects/WeatherReact/src/hooks/useWeather.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst API_KEY = '81ac6854a1b748926ad19292fd753dab';\n\nfunction useWeather(unit) {\n    const [latestWeatherData, setLatestWeatherData] = useState(null);\n    const [error, setError] = useState(null);\n\n    const fetchWeather = async (city) => {\n        if (!city) {\n            setError('Пожалуйста, введите название города');\n            return;\n        }\n\n        try {\n            setError(null);\n            setLatestWeatherData(null);\n\n            const currentResponse = await axios.get(\n                `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=${unit}`\n            );\n\n            const forecastResponse = await axios.get(\n                `https://api.openweathermap.org/data/2.5/forecast?lat=${currentResponse.data.coord.lat}&lon=${currentResponse.data.coord.lon}&appid=${API_KEY}&units=${unit}`\n            );\n\n            setLatestWeatherData({\n                current: currentResponse.data,\n                forecast: forecastResponse.data,\n            });\n        } catch (err) {\n            if (err.response?.status === 404) {\n                setError('Город не найден. Попробуйте другое место.');\n            } else {\n                setError('Не удалось получить данные о погоде. Попробуйте позже.');\n            }\n        }\n    };\n\n    useEffect(() => {\n        fetchWeather('Moscow');\n    }, [unit]);\n\n    return { latestWeatherData, error, fetchWeather };\n}\n\nexport default useWeather;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,OAAO,CAAG,kCAAkC,CAElD,QAAS,CAAAC,UAAUA,CAACC,IAAI,CAAE,CACtB,KAAM,CAACC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGP,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAC,IAAI,EAAK,CACjC,GAAI,CAACA,IAAI,CAAE,CACPF,QAAQ,CAAC,qCAAqC,CAAC,CAC/C,OACJ,CAEA,GAAI,CACAA,QAAQ,CAAC,IAAI,CAAC,CACdF,oBAAoB,CAAC,IAAI,CAAC,CAE1B,KAAM,CAAAK,eAAe,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,sDAAAC,MAAA,CACkBH,IAAI,YAAAG,MAAA,CAAUX,OAAO,YAAAW,MAAA,CAAUT,IAAI,CAC5F,CAAC,CAED,KAAM,CAAAU,gBAAgB,CAAG,KAAM,CAAAb,KAAK,CAACW,GAAG,yDAAAC,MAAA,CACoBF,eAAe,CAACI,IAAI,CAACC,KAAK,CAACC,GAAG,UAAAJ,MAAA,CAAQF,eAAe,CAACI,IAAI,CAACC,KAAK,CAACE,GAAG,YAAAL,MAAA,CAAUX,OAAO,YAAAW,MAAA,CAAUT,IAAI,CAC/J,CAAC,CAEDE,oBAAoB,CAAC,CACjBa,OAAO,CAAER,eAAe,CAACI,IAAI,CAC7BK,QAAQ,CAAEN,gBAAgB,CAACC,IAC/B,CAAC,CAAC,CACN,CAAE,MAAOM,GAAG,CAAE,KAAAC,aAAA,CACV,GAAI,EAAAA,aAAA,CAAAD,GAAG,CAACE,QAAQ,UAAAD,aAAA,iBAAZA,aAAA,CAAcE,MAAM,IAAK,GAAG,CAAE,CAC9BhB,QAAQ,CAAC,2CAA2C,CAAC,CACzD,CAAC,IAAM,CACHA,QAAQ,CAAC,wDAAwD,CAAC,CACtE,CACJ,CACJ,CAAC,CAEDR,SAAS,CAAC,IAAM,CACZS,YAAY,CAAC,QAAQ,CAAC,CAC1B,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEV,MAAO,CAAEC,iBAAiB,CAAEE,KAAK,CAAEE,YAAa,CAAC,CACrD,CAEA,cAAe,CAAAN,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}